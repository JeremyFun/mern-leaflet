{"ast":null,"code":"var _jsxFileName = \"/home/kango/Documents/MERN Projects/react-leaflet-master/client/src/Components/MapPage.js\";\nimport React from 'react';\nimport '../App.css';\nimport { Map, GeoJSON, TileLayer, Marker, Popup } from 'react-leaflet';\nimport L from 'leaflet';\nimport Joi from 'joi';\nimport MessageCard from \"./MessageCard\";\nimport { getMessages, getLocation, sendMessage } from \"../API/API\";\nimport messageIcon from \"../assets/svg/message-location.svg\";\nimport myIcon from \"../assets/svg/my-location.svg\";\nimport { Button, FormGroup, Label, Input } from 'reactstrap';\nimport Basemap from \"./Basemap\";\nimport mapData from \"../data/countries.json\";\nimport GeojsonLayer from \"./GeojsonLayerFunc\";\nexport const messagesIcon = new L.Icon({\n  iconUrl: messageIcon,\n  iconSize: [50, 82]\n});\nexport const myIcons = new L.Icon({\n  iconUrl: myIcon,\n  iconSize: [50, 82]\n});\nconst schema = Joi.object().keys({\n  name: Joi.string().min(1).max(500).required(),\n  message: Joi.string().min(1).max(500).required()\n});\nL.Icon.Default.imagePath = \"https://unpkg.com/leaflet@1.5.0/dist/images/\";\nexport class MapPage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      location: {\n        lat: 50.433300,\n        lng: 30.416700\n      },\n      haveUserLocation: false,\n      zoom: 2,\n      userMessage: {\n        name: '',\n        message: ''\n      },\n      sendingMessage: false,\n      showMessage: false,\n      sentMessage: false,\n      messages: [{\n        _id: \"5f7a5a6545d74c7b01d32559\",\n        name: \"Yatsiy Vladislav\",\n        message: \"This place is cool!\",\n        otherMessages: [],\n        latitude: 50.4501,\n        longitude: 30.5234,\n        date: \"2020-10-04T23:29:55.002Z\"\n      }, {\n        _id: \"5f7a5af345d74c7b01d3255a\",\n        name: \"Ivan\",\n        message: \"THis is is is!\",\n        latitude: 52.520007,\n        longitude: 13.404954,\n        date: \"2020-10-04T23:29:55.002Z\"\n      }, {\n        _id: \"5f7a5b2c45d74c7b01d3255b\",\n        name: \"Hex\",\n        message: \"This isisi silsd;fjlkdsj fksjd klfjsl!\",\n        latitude: 51.507351,\n        longitude: -0.127758,\n        date: \"2020-10-04T23:29:55.002Z\"\n      }, {\n        _id: \"5f7a5b4845d74c7b01d3255c\",\n        name: \"Jack\",\n        message: \"sjdhfklsdjklfjskdlfjkls j flskdjfkl \",\n        latitude: 55.755826,\n        longitude: 37.6173,\n        date: \"2020-10-04T23:29:55.002Z\"\n      }, {\n        _id: \"5f7a5b6545d74c7b01d3255d\",\n        name: \"Hejj\",\n        message: \"sdjfksljdkf sdklfjk sldjfkl s!\",\n        latitude: 37.386052,\n        longitude: -122.083851,\n        date: \"2020-10-04T23:29:55.002Z\"\n      }, {\n        _id: \"5f7a5b9245d74c7b01d3255e\",\n        name: \"Berx\",\n        message: \"TH lksldfkfl;sdk fsdl;kf l;dsk;f \",\n        latitude: 19.075984,\n        longitude: 72.877656,\n        date: \"2020-10-04T23:29:55.002Z\"\n      }, {\n        _id: \"5f7a5bcf45d74c7b01d3255f\",\n        name: \"Yura\",\n        message: \"The complete sentenses!\",\n        latitude: 37.774929,\n        longitude: -122.419416,\n        date: \"2020-10-04T23:29:55.002Z\"\n      }, {\n        _id: \"5f7a5c0145d74c7b01d32560\",\n        name: \"Uri\",\n        message: \"Hello \",\n        latitude: 31.230416,\n        longitude: 121.473701,\n        date: \"2020-10-04T23:29:55.002Z\"\n      }, {\n        _id: \"5f7a5c2245d74c7b01d32561\",\n        name: \"Pail\",\n        message: \"Helll oodaspfkl;j dsfjkljfsd!\",\n        latitude: -23.55052,\n        longitude: -46.633309,\n        date: \"2020-10-04T23:29:55.002Z\"\n      }, {\n        _id: \"5f7a5c3e45d74c7b01d32562\",\n        name: \"HEkc\",\n        message: \"JJLF;SDKL; FKSDL;K FL;SD\",\n        latitude: 35.689487,\n        longitude: 139.691706,\n        date: \"2020-10-04T23:29:55.002Z\"\n      }, {\n        _id: \"5f7b3aa9f3c915122e75cf12\",\n        name: \"dsfsd\",\n        message: \"fsdfsd\",\n        latitude: 50.4365056,\n        longitude: 30.503731199999994,\n        date: \"2020-10-04T23:29:55.002Z\"\n      }],\n      basemap: 'osm',\n      color: \"#ffff00\",\n      isCountry: false,\n      geojsonvisible: false\n    };\n    this.countryStyle = {\n      fillColor: \"#fff\",\n      fillOpacity: 1,\n      color: \"black\",\n      weight: 2\n    };\n\n    this.printMesssageToConsole = event => {\n      console.log(\"Clicked\");\n    };\n\n    this.changeCountryColor = event => {\n      event.target.setStyle({\n        color: \"green\",\n        fillColor: this.state.color,\n        fillOpacity: 1\n      });\n    };\n\n    this.onEachCountry = (country, layer) => {\n      const countryName = country.properties.ADMIN;\n      console.log(countryName);\n      layer.bindPopup(countryName);\n      layer.options.fillOpacity = Math.random(); //0-1 (0.1, 0.2, 0.3)\n      // const colorIndex = Math.floor(Math.random() * this.colors.length);\n      // layer.options.fillColor = this.colors[colorIndex]; //0\n\n      layer.on({\n        click: this.changeCountryColor\n      });\n    };\n\n    this.colorChange = event => {\n      this.setState({\n        color: event.target.value\n      });\n    };\n\n    this.showMessage = () => {\n      this.setState({\n        showMessage: true,\n        zoom: 14\n      });\n    };\n\n    this.quitWithMessage = () => {\n      this.setState({\n        showMessage: false\n      });\n    };\n\n    this.formIsValid = () => {\n      const userMessage = {\n        name: this.state.userMessage.name,\n        message: this.state.userMessage.message\n      };\n      const result = schema.validate(userMessage);\n\n      if (this.state.haveUserLocation) {\n        if (!result.error) {\n          return true;\n        }\n\n        return false;\n      }\n    };\n\n    this.formSubmitted = event => {\n      event.preventDefault();\n      this.setState({\n        sendingMessage: true\n      });\n\n      if (this.formIsValid()) {\n        const message = {\n          name: this.state.userMessage.name,\n          message: this.state.userMessage.message,\n          latitude: this.state.location.lat,\n          longitude: this.state.location.lng\n        };\n        sendMessage(message).then(result => {\n          setTimeout(() => {\n            this.setState({\n              sendingMessage: false,\n              sentMessage: true\n            });\n          }, 4000);\n        });\n      }\n    };\n\n    this.valueChanged = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState(prevState => ({\n        userMessage: { ...prevState.userMessage,\n          [name]: value\n        }\n      }));\n    };\n\n    this.onBMChange = bm => {\n      this.setState({\n        basemap: bm\n      });\n    };\n\n    this.showCountry = () => {\n      this.setState({\n        isCountry: true,\n        zoom: 5\n      });\n    };\n\n    this.unCounty = () => {\n      this.setState({\n        isCountry: false,\n        zoom: 13\n      });\n    };\n\n    this.onGeojsonToggle = e => {\n      this.setState({\n        geojsonvisible: e.currentTarget.checked,\n        zoom: 4\n      });\n    };\n  }\n\n  componentDidMount() {\n    getMessages().then(messages => {\n      this.setState({\n        messages,\n        zoom: 3.5\n      });\n\n      if (this.state.messages.length === 0) {\n        this.setState({\n          messages: [{\n            _id: \"5f7a5a6545d74c7b01d32559\",\n            name: \"Yatsiy Vladislav\",\n            message: \"This place is cool!\",\n            latitude: 50.4501,\n            longitude: 30.5234,\n            date: \"2020-10-04T23:29:55.002Z\"\n          }, {\n            _id: \"5f7a5af345d74c7b01d3255a\",\n            name: \"Ivan\",\n            message: \"THis is is is!\",\n            latitude: 52.520007,\n            longitude: 13.404954,\n            date: \"2020-10-04T23:29:55.002Z\"\n          }, {\n            _id: \"5f7a5b2c45d74c7b01d3255b\",\n            name: \"Hex\",\n            message: \"This isisi silsd;fjlkdsj fksjd klfjsl!\",\n            latitude: 51.507351,\n            longitude: -0.127758,\n            date: \"2020-10-04T23:29:55.002Z\"\n          }, {\n            _id: \"5f7a5b4845d74c7b01d3255c\",\n            name: \"Jack\",\n            message: \"sjdhfklsdjklfjskdlfjkls j flskdjfkl \",\n            latitude: 55.755826,\n            longitude: 37.6173,\n            date: \"2020-10-04T23:29:55.002Z\"\n          }, {\n            _id: \"5f7a5b6545d74c7b01d3255d\",\n            name: \"Hejj\",\n            message: \"sdjfksljdkf sdklfjk sldjfkl s!\",\n            latitude: 37.386052,\n            longitude: -122.083851,\n            date: \"2020-10-04T23:29:55.002Z\"\n          }, {\n            _id: \"5f7a5b9245d74c7b01d3255e\",\n            name: \"Berx\",\n            message: \"TH lksldfkfl;sdk fsdl;kf l;dsk;f \",\n            latitude: 19.075984,\n            longitude: 72.877656,\n            date: \"2020-10-04T23:29:55.002Z\"\n          }, {\n            _id: \"5f7a5bcf45d74c7b01d3255f\",\n            name: \"Yura\",\n            message: \"The complete sentenses!\",\n            latitude: 37.774929,\n            longitude: -122.419416,\n            date: \"2020-10-04T23:29:55.002Z\"\n          }, {\n            _id: \"5f7a5c0145d74c7b01d32560\",\n            name: \"Uri\",\n            message: \"Hello \",\n            latitude: 31.230416,\n            longitude: 121.473701,\n            date: \"2020-10-04T23:29:55.002Z\"\n          }, {\n            _id: \"5f7a5c2245d74c7b01d32561\",\n            name: \"Pail\",\n            message: \"Helll oodaspfkl;j dsfjkljfsd!\",\n            latitude: -23.55052,\n            longitude: -46.633309,\n            date: \"2020-10-04T23:29:55.002Z\"\n          }, {\n            _id: \"5f7a5c3e45d74c7b01d32562\",\n            name: \"HEkc\",\n            message: \"JJLF;SDKL; FKSDL;K FL;SD\",\n            latitude: 35.689487,\n            longitude: 139.691706,\n            date: \"2020-10-04T23:29:55.002Z\"\n          }, {\n            _id: \"5f7b3aa9f3c915122e75cf12\",\n            name: \"dsfsd\",\n            message: \"fsdfsd\",\n            latitude: 50.4365056,\n            longitude: 30.503731199999994,\n            date: \"2020-10-04T23:29:55.002Z\"\n          }]\n        });\n      }\n    });\n    getLocation().then(location => {\n      this.setState({\n        location,\n        haveUserLocation: true,\n        zoom: 13\n      });\n    });\n    console.log(mapData);\n  }\n\n  render() {\n    const position = [this.state.location.lat, this.state.location.lng];\n    const basemapsDict = {\n      osm: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n      hot: \"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png\",\n      dark: \"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}@2x.png\",\n      cycle: \"https://dev.{s}.tile.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"map\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Map, {\n      className: \"map\",\n      center: position,\n      zoom: this.state.zoom,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TileLayer, {\n      attribution: \"&copy <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n      url: basemapsDict[this.state.basemap],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 21\n      }\n    }), this.state.haveUserLocation ? /*#__PURE__*/React.createElement(Marker, {\n      position: position,\n      icon: myIcons,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(Popup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 33\n      }\n    }, \"Here will be \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 50\n      }\n    }), \" your comment.\")) : \"\", this.state.messages.map(message => {\n      return /*#__PURE__*/React.createElement(Marker, {\n        key: message._id,\n        position: [message.latitude, message.longitude],\n        icon: messagesIcon,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(Popup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"em\", {\n        className: \"message-name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 40\n        }\n      }, message.name), \" : \", message.message), message.otherMessages ? message.otherMessages.map(message => /*#__PURE__*/React.createElement(\"p\", {\n        key: message._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 99\n        }\n      }, /*#__PURE__*/React.createElement(\"em\", {\n        className: \"message-name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 41\n        }\n      }, message.name), \" : \", message.message)) : \"\"));\n    }), this.state.isCountry ? /*#__PURE__*/React.createElement(GeoJSON, {\n      style: this.countryStyle,\n      data: mapData.features,\n      onEachFeature: this.onEachCountry,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 45\n      }\n    }) : \"\", /*#__PURE__*/React.createElement(FormGroup, {\n      check: true,\n      className: \"message-form-three\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      check: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      type: \"checkbox\",\n      name: \"layertoggle\",\n      id: \"layertoggle\",\n      size: \"sm\",\n      style: {\n        width: \"20px\"\n      },\n      value: this.state.geojsonvisible,\n      onChange: this.onGeojsonToggle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 29\n      }\n    }), \"Check me\")), this.state.geojsonvisible && /*#__PURE__*/React.createElement(GeojsonLayer, {\n      url: \"places.json\",\n      cluster: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 51\n      }\n    })), /*#__PURE__*/React.createElement(Basemap, {\n      basemap: this.state.basemap,\n      onChange: this.onBMChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }\n    }), this.state.isCountry ? /*#__PURE__*/React.createElement(\"input\", {\n      type: \"color\",\n      value: this.state.color,\n      onChange: this.colorChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 44\n      }\n    }) : \"\", !this.state.showMessage ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n      outline: true,\n      color: \"primary\",\n      onClick: this.showMessage,\n      className: \"message-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 29\n      }\n    }, \"Add message\")) : /*#__PURE__*/React.createElement(MessageCard, {\n      sendingMessage: this.state.sendingMessage,\n      sentMessage: this.state.sentMessage,\n      haveUserLocation: this.state.haveUserLocation,\n      formSubmitted: this.formSubmitted,\n      valueChanged: this.valueChanged,\n      formIsValid: this.formIsValid,\n      quitWithMessage: this.quitWithMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 25\n      }\n    }), this.state.isCountry ? !this.state.showMessage ? /*#__PURE__*/React.createElement(Button, {\n      outline: true,\n      color: \"primary\",\n      onClick: this.unCounty,\n      className: \"message-form-two\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 51\n      }\n    }, \"Exit with mode\") : \"\" : !this.state.showMessage ? /*#__PURE__*/React.createElement(Button, {\n      outline: true,\n      color: \"primary\",\n      onClick: this.showCountry,\n      className: \"message-form-two\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 53\n      }\n    }, \"Highlight countries\") : \"\");\n  }\n\n}","map":{"version":3,"sources":["/home/kango/Documents/MERN Projects/react-leaflet-master/client/src/Components/MapPage.js"],"names":["React","Map","GeoJSON","TileLayer","Marker","Popup","L","Joi","MessageCard","getMessages","getLocation","sendMessage","Button","FormGroup","Label","Input","Basemap","mapData","GeojsonLayer","messagesIcon","Icon","iconUrl","messageIcon","iconSize","myIcons","myIcon","schema","object","keys","name","string","min","max","required","message","Default","imagePath","MapPage","Component","state","location","lat","lng","haveUserLocation","zoom","userMessage","sendingMessage","showMessage","sentMessage","messages","_id","otherMessages","latitude","longitude","date","basemap","color","isCountry","geojsonvisible","countryStyle","fillColor","fillOpacity","weight","printMesssageToConsole","event","console","log","changeCountryColor","target","setStyle","onEachCountry","country","layer","countryName","properties","ADMIN","bindPopup","options","Math","random","on","click","colorChange","setState","value","quitWithMessage","formIsValid","result","validate","error","formSubmitted","preventDefault","then","setTimeout","valueChanged","prevState","onBMChange","bm","showCountry","unCounty","onGeojsonToggle","e","currentTarget","checked","componentDidMount","length","render","position","basemapsDict","osm","hot","dark","cycle","map","features","width"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../App.css';\n\nimport {Map, GeoJSON, TileLayer, Marker, Popup} from 'react-leaflet'\nimport L from 'leaflet'\nimport Joi from 'joi'\n\nimport MessageCard from \"./MessageCard\";\n\nimport {getMessages, getLocation, sendMessage} from \"../API/API\";\n\nimport messageIcon from '../assets/svg/message-location.svg';\nimport myIcon from '../assets/svg/my-location.svg';\n\nimport {Button, FormGroup, Label, Input} from 'reactstrap';\n\nimport Basemap from \"./Basemap\";\nimport mapData from \"../data/countries.json\";\nimport GeojsonLayer from \"./GeojsonLayerFunc\";\n\nexport const messagesIcon = new L.Icon({\n    iconUrl: messageIcon,\n    iconSize: [50, 82],\n})\n\nexport const myIcons = new L.Icon({\n    iconUrl: myIcon,\n    iconSize: [50, 82]\n})\n\nconst schema = Joi.object().keys({\n    name: Joi.string().min(1).max(500).required(),\n    message: Joi.string().min(1).max(500).required(),\n})\n\nL.Icon.Default.imagePath = \"https://unpkg.com/leaflet@1.5.0/dist/images/\";\n\nexport class MapPage extends React.Component {\n    state = {\n        location: {\n            lat: 50.433300,\n            lng: 30.416700,\n        },\n        haveUserLocation: false,\n        zoom: 2,\n        userMessage: {\n            name: '',\n            message: ''\n        },\n        sendingMessage: false,\n        showMessage: false,\n        sentMessage: false,\n        messages: [\n                {_id: \"5f7a5a6545d74c7b01d32559\", name: \"Yatsiy Vladislav\", message: \"This place is cool!\", otherMessages: [], latitude: 50.4501, longitude: 30.5234, date: \"2020-10-04T23:29:55.002Z\"},\n                {_id: \"5f7a5af345d74c7b01d3255a\", name: \"Ivan\", message: \"THis is is is!\", latitude: 52.520007, longitude: 13.404954, date: \"2020-10-04T23:29:55.002Z\"},\n                {_id: \"5f7a5b2c45d74c7b01d3255b\", name: \"Hex\", message: \"This isisi silsd;fjlkdsj fksjd klfjsl!\", latitude: 51.507351, longitude: -0.127758, date: \"2020-10-04T23:29:55.002Z\"},\n                {_id: \"5f7a5b4845d74c7b01d3255c\", name: \"Jack\", message: \"sjdhfklsdjklfjskdlfjkls j flskdjfkl \", latitude: 55.755826, longitude: 37.6173, date: \"2020-10-04T23:29:55.002Z\"},\n                {_id: \"5f7a5b6545d74c7b01d3255d\", name: \"Hejj\", message: \"sdjfksljdkf sdklfjk sldjfkl s!\", latitude: 37.386052, longitude: -122.083851, date: \"2020-10-04T23:29:55.002Z\"},\n                {_id: \"5f7a5b9245d74c7b01d3255e\", name: \"Berx\", message: \"TH lksldfkfl;sdk fsdl;kf l;dsk;f \", latitude: 19.075984, longitude: 72.877656, date: \"2020-10-04T23:29:55.002Z\"},\n                {_id: \"5f7a5bcf45d74c7b01d3255f\", name: \"Yura\", message: \"The complete sentenses!\", latitude: 37.774929, longitude: -122.419416, date: \"2020-10-04T23:29:55.002Z\"},\n                {_id: \"5f7a5c0145d74c7b01d32560\", name: \"Uri\", message: \"Hello \", latitude: 31.230416, longitude: 121.473701, date: \"2020-10-04T23:29:55.002Z\"},\n                {_id: \"5f7a5c2245d74c7b01d32561\", name: \"Pail\", message: \"Helll oodaspfkl;j dsfjkljfsd!\", latitude: -23.55052, longitude: -46.633309, date: \"2020-10-04T23:29:55.002Z\"},\n                {_id: \"5f7a5c3e45d74c7b01d32562\", name: \"HEkc\", message: \"JJLF;SDKL; FKSDL;K FL;SD\", latitude: 35.689487, longitude: 139.691706, date: \"2020-10-04T23:29:55.002Z\"},\n                {_id: \"5f7b3aa9f3c915122e75cf12\", name: \"dsfsd\", message: \"fsdfsd\", latitude: 50.4365056, longitude: 30.503731199999994, date: \"2020-10-04T23:29:55.002Z\"}\n            ],\n\n        basemap: 'osm',\n        color: \"#ffff00\",\n        isCountry: false,\n\n        geojsonvisible: false,\n    }\n\n\n    componentDidMount() {\n        getMessages()\n            .then(messages => {\n                this.setState({\n                    messages,\n                    zoom: 3.5\n                })\n                if (this.state.messages.length === 0) {\n                    this.setState({\n                        messages: [\n                            {_id: \"5f7a5a6545d74c7b01d32559\", name: \"Yatsiy Vladislav\", message: \"This place is cool!\", latitude: 50.4501, longitude: 30.5234, date: \"2020-10-04T23:29:55.002Z\"},\n                            {_id: \"5f7a5af345d74c7b01d3255a\", name: \"Ivan\", message: \"THis is is is!\", latitude: 52.520007, longitude: 13.404954, date: \"2020-10-04T23:29:55.002Z\"},\n                            {_id: \"5f7a5b2c45d74c7b01d3255b\", name: \"Hex\", message: \"This isisi silsd;fjlkdsj fksjd klfjsl!\", latitude: 51.507351, longitude: -0.127758, date: \"2020-10-04T23:29:55.002Z\"},\n                            {_id: \"5f7a5b4845d74c7b01d3255c\", name: \"Jack\", message: \"sjdhfklsdjklfjskdlfjkls j flskdjfkl \", latitude: 55.755826, longitude: 37.6173, date: \"2020-10-04T23:29:55.002Z\"},\n                            {_id: \"5f7a5b6545d74c7b01d3255d\", name: \"Hejj\", message: \"sdjfksljdkf sdklfjk sldjfkl s!\", latitude: 37.386052, longitude: -122.083851, date: \"2020-10-04T23:29:55.002Z\"},\n                            {_id: \"5f7a5b9245d74c7b01d3255e\", name: \"Berx\", message: \"TH lksldfkfl;sdk fsdl;kf l;dsk;f \", latitude: 19.075984, longitude: 72.877656, date: \"2020-10-04T23:29:55.002Z\"},\n                            {_id: \"5f7a5bcf45d74c7b01d3255f\", name: \"Yura\", message: \"The complete sentenses!\", latitude: 37.774929, longitude: -122.419416, date: \"2020-10-04T23:29:55.002Z\"},\n                            {_id: \"5f7a5c0145d74c7b01d32560\", name: \"Uri\", message: \"Hello \", latitude: 31.230416, longitude: 121.473701, date: \"2020-10-04T23:29:55.002Z\"},\n                            {_id: \"5f7a5c2245d74c7b01d32561\", name: \"Pail\", message: \"Helll oodaspfkl;j dsfjkljfsd!\", latitude: -23.55052, longitude: -46.633309, date: \"2020-10-04T23:29:55.002Z\"},\n                            {_id: \"5f7a5c3e45d74c7b01d32562\", name: \"HEkc\", message: \"JJLF;SDKL; FKSDL;K FL;SD\", latitude: 35.689487, longitude: 139.691706, date: \"2020-10-04T23:29:55.002Z\"},\n                            {_id: \"5f7b3aa9f3c915122e75cf12\", name: \"dsfsd\", message: \"fsdfsd\", latitude: 50.4365056, longitude: 30.503731199999994, date: \"2020-10-04T23:29:55.002Z\"}\n                        ]\n                    })\n                }\n            })\n        getLocation()\n            .then(location => {\n                this.setState({\n                    location,\n                    haveUserLocation: true,\n                    zoom: 13,\n                })\n            })\n        console.log(mapData);\n    }\n\n\n    countryStyle = {\n        fillColor: \"#fff\",\n        fillOpacity: 1,\n        color: \"black\",\n        weight: 2,\n    };\n\n    printMesssageToConsole = (event) => {\n        console.log(\"Clicked\");\n    };\n\n    changeCountryColor = (event) => {\n        event.target.setStyle({\n            color: \"green\",\n            fillColor: this.state.color,\n            fillOpacity: 1,\n        });\n    };\n\n    onEachCountry = (country, layer) => {\n        const countryName = country.properties.ADMIN;\n        console.log(countryName);\n        layer.bindPopup(countryName);\n\n        layer.options.fillOpacity = Math.random(); //0-1 (0.1, 0.2, 0.3)\n        // const colorIndex = Math.floor(Math.random() * this.colors.length);\n        // layer.options.fillColor = this.colors[colorIndex]; //0\n\n        layer.on({\n            click: this.changeCountryColor,\n        });\n    };\n\n    colorChange = (event) => {\n        this.setState({color: event.target.value});\n    };\n\n\n    showMessage = () => {\n        this.setState({\n            showMessage: true,\n            zoom: 14\n        })\n    }\n\n    quitWithMessage = () => {\n        this.setState({\n            showMessage: false\n        })\n    }\n\n    formIsValid = () => {\n        const userMessage = {\n            name: this.state.userMessage.name,\n            message: this.state.userMessage.message\n        }\n        const result = schema.validate(userMessage)\n\n        if (this.state.haveUserLocation) {\n            if (!result.error) {\n                return true\n            }\n            return false\n        }\n    }\n\n    formSubmitted = (event) => {\n        event.preventDefault()\n        this.setState({\n            sendingMessage: true\n        })\n        if (this.formIsValid()) {\n            const message = {\n                name: this.state.userMessage.name,\n                message: this.state.userMessage.message,\n                latitude: this.state.location.lat,\n                longitude: this.state.location.lng\n            }\n            sendMessage(message)\n                .then((result) => {\n                    setTimeout(() => {\n                        this.setState({\n                            sendingMessage: false,\n                            sentMessage: true\n                        })\n                    }, 4000)\n                })\n        }\n    }\n\n    valueChanged = (event) => {\n        const {name, value} = event.target\n        this.setState((prevState) => ({\n            userMessage: {\n                ...prevState.userMessage,\n                [name]: value\n            }\n        }))\n    }\n\n    onBMChange = (bm) => {\n        this.setState({\n            basemap: bm\n        });\n    }\n\n    showCountry = () => {\n        this.setState({\n            isCountry: true,\n            zoom: 5\n        })\n    }\n\n    unCounty = () => {\n        this.setState({\n            isCountry: false,\n            zoom: 13\n        })\n    }\n\n\n    onGeojsonToggle = (e) => {\n\n        this.setState({\n            geojsonvisible: e.currentTarget.checked,\n            zoom: 4\n        });\n    }\n\n\n    render() {\n        const position = [this.state.location.lat, this.state.location.lng]\n\n        const basemapsDict = {\n            osm: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n            hot: \"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png\",\n            dark: \"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}@2x.png\",\n            cycle: \"https://dev.{s}.tile.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png\"\n        }\n        return (\n            <div className=\"map\">\n                <Map className=\"map\" center={position} zoom={this.state.zoom}>\n                    <TileLayer\n                        attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                        url={basemapsDict[this.state.basemap]}\n                    />\n                    {\n                        this.state.haveUserLocation\n                            ? <Marker position={position} icon={myIcons}>\n                                <Popup>\n                                    Here will be <br/> your comment.\n                                </Popup>\n                            </Marker>\n                            : \"\"\n                    }\n                    {\n                        this.state.messages.map(message => {\n                            return (<Marker key={message._id} position={[message.latitude, message.longitude]}\n                                            icon={messagesIcon}>\n                                <Popup>\n                                    <p><em className=\"message-name\">{message.name}</em> : {message.message}</p>\n                                    {message.otherMessages ? message.otherMessages.map(message => <p key={message._id}>\n                                        <em className=\"message-name\">{message.name}</em> : {message.message}</p>) : \"\"}\n                                </Popup>\n                            </Marker>)\n                        })\n                    }\n                    {this.state.isCountry ? <GeoJSON\n                        style={this.countryStyle}\n                        data={mapData.features}\n                        onEachFeature={this.onEachCountry}\n                    /> : \"\"}\n                    <FormGroup check className=\"message-form-three\">\n                        <Label check>{/*<div className=\"geojson-toggle\">*/}\n                    {/*    <label htmlFor=\"layertoggle\">Toggle Geojson </label>*/}\n                    {/*    <input type=\"checkbox\"*/}\n                    {/*           name=\"layertoggle\" id=\"layertoggle\"*/}\n                    {/*           value={this.state.geojsonvisible} onChange={this.onGeojsonToggle}/>*/}\n                    {/*</div>*/}\n                            <Input type=\"checkbox\"\n                                   name=\"layertoggle\"\n                                   id=\"layertoggle\"\n                                   size=\"sm\"\n                                   style={{width: \"20px\"}}\n                                   value={this.state.geojsonvisible}\n                                   onChange={this.onGeojsonToggle}\n                            />\n                            Check me\n                        </Label>\n                    </FormGroup>\n\n                    {this.state.geojsonvisible && <GeojsonLayer url=\"places.json\" cluster={true}/>}\n                </Map>\n\n                <Basemap basemap={this.state.basemap} onChange={this.onBMChange}/>\n\n                {\n                    this.state.isCountry ? <input\n                        type=\"color\"\n                        value={this.state.color}\n                        onChange={this.colorChange}\n                    /> : \"\"\n                }\n                {\n                    !this.state.showMessage\n                        ?\n                        <>\n                            <Button outline\n                                    color=\"primary\"\n                                    onClick={this.showMessage}\n                                    className=\"message-form\"\n                            >Add message</Button>\n                        </>\n                        :\n                        <MessageCard\n                            sendingMessage={this.state.sendingMessage}\n                            sentMessage={this.state.sentMessage}\n                            haveUserLocation={this.state.haveUserLocation}\n                            formSubmitted={this.formSubmitted}\n                            valueChanged={this.valueChanged}\n                            formIsValid={this.formIsValid}\n                            quitWithMessage={this.quitWithMessage}\n                        />\n                }\n                {\n                    this.state.isCountry ?\n                        !this.state.showMessage ? <Button outline\n                                                          color=\"primary\"\n                                                          onClick={this.unCounty}\n                                                          className=\"message-form-two\"\n                        >Exit with mode</Button> : \"\"\n                        : !this.state.showMessage ? <Button outline\n                                                            color=\"primary\"\n                                                            onClick={this.showCountry}\n                                                            className=\"message-form-two\"\n                        >Highlight countries</Button> : \"\"\n                }\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}