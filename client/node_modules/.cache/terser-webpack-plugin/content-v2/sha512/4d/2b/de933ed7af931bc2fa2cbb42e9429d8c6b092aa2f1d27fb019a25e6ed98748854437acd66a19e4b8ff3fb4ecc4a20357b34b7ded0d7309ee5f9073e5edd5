{"map":{"version":3,"sources":["static/js/main.e000c2d8.chunk.js"],"names":["this","push","29","module","exports","__webpack_require__","p","30","34","39","40","68","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","defineProperty","objectSpread2","classCallCheck","createClass","inherits","createSuper","Map","TileLayer","Marker","Popup","leaflet_src","leaflet_src_default","joi_browser_min","joi_browser_min_default","CardBody","CardTitle","CardText","Form","FormGroup","Label","Input","Button","message_location","message_location_default","my_location","my_location_default","messagesIcon","a","Icon","iconUrl","iconSize","iconAnchor","popupAnchor","myIcons","schema","object","keys","name","string","min","max","required","message","API_URL","window","location","hostname","src_App_0","_React$Component","Object","App","_super","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","lat","lng","haveUserLocation","zoom","userMessage","sendingMessage","sentMessage","messages","formIsValid","result","validate","error","formSubmitted","event","preventDefault","setState","fetch","method","headers","Content-Type","body","JSON","stringify","latitude","longitude","then","res","json","console","log","setTimeout","valueChanged","_event$target","target","value","prevState","key","_this2","haveSeenLocation","reduce","all","toFixed","otherMessages","navigator","geolocation","getCurrentPosition","position","coords","lon","createElement","className","center","attribution","url","icon","map","_id","autoPlay","loop","src","onSubmit","for","onChange","type","id","placeholder","color","disabled","Component","Boolean","match","render","StrictMode","document","getElementById","serviceWorker","ready","registration","unregister","catch"],"mappings":"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"},"code":"(this[\"webpackJsonpclient-app\"]=this[\"webpackJsonpclient-app\"]||[]).push([[0],{29:function(e,t,a){e.exports=a.p+\"static/media/message-location.3d0c5526.svg\"},30:function(e,t,a){e.exports=a.p+\"static/media/my-location.40808547.svg\"},34:function(e,t,a){e.exports=a(68)},39:function(e,t,a){},40:function(e,t,a){},68:function(e,t,a){\"use strict\";a.r(t);var n=a(1),o=a.n(n),s=a(11),i=a.n(s),r=(a(39),a(12)),c=a(20),l=a(27),m=a(28),u=a(33),g=a(32),h=(a(40),a(81)),p=a(82),d=a(71),f=a(80),v=a(8),E=a.n(v),y=a(17),M=a.n(y),b=a(72),S=a(73),w=a(74),j=a(75),k=a(76),x=a(77),z=a(78),O=a(79),C=a(29),U=a.n(C),L=a(30),A=a.n(L),I=new E.a.Icon({iconUrl:U.a,iconSize:[35,38],iconAnchor:[13.5,41],popupAnchor:[0,-41]}),N=new E.a.Icon({iconUrl:A.a,iconSize:[35,38],iconAnchor:[13.5,41],popupAnchor:[0,-41]}),T=M.a.object().keys({name:M.a.string().min(1).max(500).required(),message:M.a.string().min(1).max(500).required()}),J=\"localhost\"===window.location.hostname?\"http://localhost:5000/api/v1/messages\":\"production_url_here\",_=function(e){Object(u.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={location:{lat:50.4333,lng:30.4167},haveUserLocation:!1,zoom:2,userMessage:{name:\"\",message:\"\"},sendingMessage:!1,sentMessage:!1,messages:[]},e.formIsValid=function(){var t={name:e.state.userMessage.name,message:e.state.userMessage.message},a=T.validate(t);if(e.state.haveUserLocation)return!a.error},e.formSubmitted=function(t){t.preventDefault(),e.setState({sendingMessage:!0}),e.formIsValid()&&fetch(J,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:e.state.userMessage.name,message:e.state.userMessage.message,latitude:e.state.location.lat,longitude:e.state.location.lng})}).then((function(e){return e.json()})).then((function(t){console.log(t),setTimeout((function(){e.setState({sendingMessage:!1,sentMessage:!0})}),4e3)}))},e.valueChanged=function(t){var a=t.target,n=a.name,o=a.value;e.setState((function(e){return{userMessage:Object(c.a)(Object(c.a)({},e.userMessage),{},Object(r.a)({},n,o))}}))},e}return Object(m.a)(a,[{key:\"componentDidMount\",value:function(){var e=this;fetch(J).then((function(e){return e.json()})).then((function(t){var a={};t=t.reduce((function(e,t){var n=\"\".concat(t.latitude.toFixed(2)).concat(t.longitude.toFixed(2));return a[n]?(console.log(a[n],\"key\"),a[n].otherMessages=a[n].otherMessages||[],a[n].otherMessages.push(t)):(a[n]=t,e.push(t)),e}),[]),e.setState({messages:t})})),navigator.geolocation.getCurrentPosition((function(t){e.setState({location:{lat:t.coords.latitude,lng:t.coords.longitude},haveUserLocation:!0,zoom:13})}),(function(){console.log(\"uh, oh... they didnt give us their location...\"),fetch(\"http://ip-api.com/json/\").then((function(e){return e.json()})).then((function(t){e.setState({location:{lat:t.lat,lng:t.lon},haveUserLocation:!0,zoom:13})}))}))}},{key:\"render\",value:function(){var e=[this.state.location.lat,this.state.location.lng];return o.a.createElement(\"div\",{className:\"map\"},o.a.createElement(h.a,{className:\"map\",center:e,zoom:this.state.zoom},o.a.createElement(p.a,{attribution:'&copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),this.state.haveUserLocation?o.a.createElement(d.a,{position:e,icon:N},o.a.createElement(f.a,null,\"A pretty CSS3 popup. \",o.a.createElement(\"br\",null),\" Easily customizable.\")):\"\",this.state.messages.map((function(e){return o.a.createElement(d.a,{key:e._id,position:[e.latitude,e.longitude],icon:I},o.a.createElement(f.a,null,o.a.createElement(\"p\",null,o.a.createElement(\"em\",null,e.name),e.message),e.otherMessages?e.otherMessages.map((function(e){return o.a.createElement(\"p\",{key:e._id},o.a.createElement(\"em\",null,e.name),\" : \",e.message)})):\"\"))}))),o.a.createElement(b.a,{className:\"message-form\"},o.a.createElement(S.a,null,\"Welcome to GuestM.app\"),o.a.createElement(w.a,null,\"Leave a message with your location!\"),o.a.createElement(w.a,null,\"Thanks for stopping by!\"),this.state.sendingMessage||this.state.sentMessage||!this.state.haveUserLocation?this.state.sendingMessage||!this.state.haveUserLocation?o.a.createElement(\"video\",{className:\"video\",autoPlay:!0,loop:!0,src:\"https://media.giphy.com/media/xkC0zz2GObJfy/giphy.mp4\"}):o.a.createElement(w.a,null,\"Thanks for submitting a message!\"):o.a.createElement(j.a,{onSubmit:this.formSubmitted},o.a.createElement(k.a,null,o.a.createElement(x.a,{for:\"name\"},\"Name\"),o.a.createElement(z.a,{onChange:this.valueChanged,type:\"text\",name:\"name\",id:\"name\",placeholder:\"Enter your name\"})),o.a.createElement(k.a,null,o.a.createElement(x.a,{for:\"message\"},\"Message\"),o.a.createElement(z.a,{onChange:this.valueChanged,type:\"textarea\",name:\"message\",id:\"message\",placeholder:\"Enter a message\"})),o.a.createElement(O.a,{type:\"submit\",color:\"info\",disabled:!this.formIsValid()},\"Send\"))))}}]),a}(o.a.Component);Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(66),a(67);i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(_,null)),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);","extractedComments":[]}